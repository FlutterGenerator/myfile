#!/bin/bash

# –ü—Ä–æ–≤–µ—Ä–∫–∞, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ radare2
if ! command -v r2 &> /dev/null; then
    echo "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ radare2"
    pkg install -y radare2 &> /dev/null
fi

echo
echo ' ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïó'
echo '‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïë‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïî‚ïù'
echo '‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù '
echo '‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ñà‚ñà‚ïó '
echo '‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïó'
echo '‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïù   ‚ïö‚ïê‚ïù   ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù'
echo ' Dont Remove Copyright ¬©Antik'
echo

# –í–≤–æ–¥ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
read -p "„ÄÑ –í–í–ï–î–ò–¢–ï –¶–ï–õ–ï–í–£–Æ –î–ò–†–ï–ö–¢–û–†–ò–Æ --> " target_directory
echo "–í–≤–µ–¥–µ–Ω–Ω–∞—è —Ü–µ–ª–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $target_directory"
echo

# –ü–µ—Ä–µ—Ö–æ–¥ –≤ —Ü–µ–ª–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd "$target_directory" || { echo "–ù–µ —É–¥–∞–ª–æ—Å—å –∏–∑–º–µ–Ω–∏—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é"; exit 1; }

# –í–≤–æ–¥ –∏–º–µ–Ω–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
read -p "„ÄÑ –í–ê–®–ï –ò–ú–Ø –ë–ò–ë–õ–ò–û–¢–ï–ö–ò -->> " libname
echo "–í–≤–µ–¥–µ–Ω–Ω–æ–µ –∏–º—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏: $libname"
echo

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
if [[ ! -f "$libname" ]]; then
    echo "–û—à–∏–±–∫–∞: –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ '$libname' –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ '$target_directory'."
    exit 1
fi

# –î–∞–º–ø
echo "–î–∞–º–ø–∏–º..!!"
r2 -w "$libname" << EOF &> /dev/null
iE > Dump.cs
q
EOF

echo
echo "–î–∞–º–ø –∑–∞–≤–µ—Ä—à–µ–Ω ü§°üëâüëå"